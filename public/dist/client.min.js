var app=angular.module("eureka",["eureka.data","eureka.authService","eureka.auth","eureka.home","ui.router"]);app.config(function(a,b,c){b.otherwise("/login"),a.state("home",{url:"/home",templateUrl:"app/views/home.html",controller:"HomeController"}).state("search",{url:"/search",templateUrl:"app/views/search.html",controller:"HomeController"}).state("signup",{url:"/signup",templateUrl:"app/views/signup.html",controller:"AuthController"}).state("login",{url:"/login",templateUrl:"app/views/login.html",controller:"AuthController"}),c.interceptors.push("AttachTokens")}),app.factory("AttachTokens",function(a){var b={request:function(b){var c=JSON.parse(a.localStorage.getItem("eureka"));return c&&(b.headers["x-access-token"]=c.token),b.headers["Allow-Control-Allow-Origin"]="*",b}};return b}),angular.module("eureka.auth",[]).controller("AuthController",["$scope","$http","$window","$location","Auth",function(a,b,c,d,e){a.user={},a.signup=function(){e.signup(a.user).then(function(a){console.log("success...signing in now..."),c.localStorage.setItem("eureka",JSON.stringify(a)),d.path("/home")})["catch"](function(a){console.error(a)})},a.login=function(){e.login(a.user).then(function(a){console.log("success...signing in now..."),c.localStorage.setItem("eureka",JSON.stringify(a)),d.path("/home")})["catch"](function(a){console.error(a)})}}]),angular.module("eureka.home",[]).controller("HomeController",["$scope","$http","$window","$location","Data","Auth",function(a,b,c,d,e,f){f.isAuth()||d.path("/login"),a.signout=function(){f.signout()},a.modalShow=!1,a.changeModal=function(){console.log("changing modal..."),a.modalShow===!1?a.modalShow=!0:a.modalShow=!1},a.username=JSON.parse(c.localStorage.getItem("eureka")).username,a.token=JSON.parse(c.localStorage.getItem("eureka")).token,a.links=void 0,a.allLinks=void 0,a.searchValue=e.searchValue,a.getLinks=function(){console.log("getting links..."),b({method:"GET",url:"/api/links"}).then(function(b){for(var c in b.data.links){var d=b.data.links[c].date.split("T");date=d[0].split("-"),b.data.links[c].date=date}a.links=b.data.links;var e=[];for(var c in a.links)e=e.concat(a.links[c].links);return a.allLinks=e,b.data})["catch"](function(a){console.log(a)})},a.submitLink=function(c){console.log("submitting link...",c);var d={};d.url=c,d.username=e.username,console.log(d),b({method:"POST",url:"/api/links",headers:{Authorization:e.token},data:d}).then(function(b){return console.log("success...link added"),a.getLinks(),b.data})["catch"](function(a){console.log(a)}),a.addLink.$setPristine(),a.newLink="",a.changeModal()},a.search=function(a){e.searchValue=a,d.path("/search")},a.getLinks()}]),angular.module("eureka.data",[]).factory("Data",function(a,b,c){var d=void 0;return{searchValue:d}});